$(function(){$("li label").on("click",function(e){tab_content=$(this).attr("id"),$('div[id$="tab-content"]').removeClass("active"),$(tab_content).addClass("active"),"#add-tab-content"==tab_content&&($("#urlDesk").focus(),$("#tab1").trigger("click"))})}),$(function(){$(".menu-link").click(function(){$(".menu-link").removeClass("is-active"),$(this).addClass("is-active")})}),$(function(){$(".main-header-link").click(function(){$(".main-header-link").removeClass("is-active"),$(this).addClass("is-active")})});const dropdowns=document.querySelectorAll(".dropdown");dropdowns.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),dropdowns.forEach(e=>e.classList.remove("is-active")),e.classList.add("is-active")})}),$(".search-bar input").focus(function(){$(".header").addClass("wide")}).blur(function(){$(".header").removeClass("wide")}),$(document).click(function(e){var t=$(".status-button"),i=$(".dropdown");t.is(e.target)||0!==t.has(e.target).length||i.removeClass("is-active")}),$(function(){$(".dropdown").on("click",function(e){$(".content-wrapper").addClass("overlay"),e.stopPropagation()}),$(document).on("click",function(e){!1===$(e.target).is(".dropdown")&&$(".content-wrapper").removeClass("overlay")})}),$(".dark-light").click(function(e){e.preventDefault(),$("body").toggleClass("light-mode"),fetch("/execute$./toggle-class.sh")}),$(".product input").click(function(e){let t="#circle_"+this.id.replace(/.*\_/,"");"gray"===$(t).attr("class").split(" ")[1]?$(t).removeClass("gray").addClass("green"):$(t).removeClass("green").addClass("gray"),fetch(`/execute$./enable-disable.sh ${this.value}`)}),$("#open-change-browsers").click(function(){$(".pop-up#change-browser").addClass("visible")}),$(".pop-up .close").click(function(){$(".pop-up").removeClass("visible")}),$(".btn-img").each(function(e,t){var i=$(t).children()[0],s=$(i).attr("src"),c=$(i).attr("data-icon");$(t).click(function(){$("#browserIcon").attr("src")==s?$(".pop-up#change-browser").removeClass("visible"):($(".pop-up#change-browser").removeClass("visible"),$(".iconBrowser").attr("src",s),fetch(`/execute$./change_browser.sh ${c}`))})});var invalidUrl,checkUrl,checkUrlValid,invalidName,checkName,checkNameValid,firstOption=$("#browserSelect option").first(),firstOptionValue=firstOption.val();function isValidURL(e){return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi)}$("#browser").attr("src","icons/"+firstOptionValue+".png"),"firefox"!=firstOptionValue&&"epiphany"!=firstOptionValue?$("#perfilAdd").show():$("#perfilAdd").hide(),$("#browserSelect").on("change",function(){switch($("#browser").attr("src","icons/"+this.value+".png"),this.value){case"epiphany":case"firefox":$("#perfilAdd").hide();break;default:$("#perfilAdd").show()}}),$("#loadIcon").click(function(e){e.preventDefault(),fetch("/execute$./change_icon.sh").then(e=>e.text()).then(e=>{e&&($("#iconDesk").attr("src",e),$("#inputIconDesk").val(e))})}),$("#modeTv, #loadIconChange").hide(),$("#urlDesk").on("keyup paste search",function(){checkUrl=$(this).val(),checkUrlValid=isValidURL(checkUrl),checkUrl?checkUrlValid?($(this).css("border-bottom-color","forestgreen"),checkUrl.match(/youtu(.be|be)/gi)&&$("#modeTv").show(),invalidUrl=!1):($(this).css("border-bottom-color","crimson"),$("#modeTv").hide(),invalidUrl=!0):($(this).css("border-bottom-color",""),$("#modeTv").hide(),invalidUrl=!0)}),$("#nameDesk").on("keyup paste search",function(){checkName=$(this).val(),checkNameValid=/\w/.test(checkName),checkName?checkNameValid?($(this).css("border-bottom-color","forestgreen"),invalidName=!1):($(this).css("border-bottom-color","crimson"),invalidName=!0):($(this).css("border-bottom-color",""),invalidName=!0)}),$("#detectAll").click(function(e){e.preventDefault();let t=$("#urlDesk").val();isValidURL(t)&&t&&!/\s/.test(t)?($(".lds-ring").css("display","inline-flex"),fetch(`/execute$./get_title.sh.py ${t}`).then(e=>e.text()).then(e=>{e&&($("#nameDesk").val(e),$("#nameDesk").keyup())}),fetch(`/execute$./get_favicon.sh.py ${t}`).then(e=>e.text()).then(e=>{e?/\/tmp/.test(e)?($("#iconDesk").attr("src",e),$("#inputIconDesk").val(e),$(".lds-ring").css("display","none")):($(".pop-up#detectIcon #menu").html(e),$(".lds-ring").css("display","none"),$(".pop-up#detectIcon").addClass("visible"),$(".btn-img-favicon").each(function(e,t){$(t).click(function(t){t.preventDefault(),$(".lds-ring").css("display","inline-flex");let i=$("#btn-icon-"+e+" img").attr("src");fetch(`/execute$./save_favicon.sh.py ${i}`).then(e=>e.text()).then(e=>{$("#iconDesk").attr("src",e),$("#inputIconDesk").val(e),$(".lds-ring").css("display","none"),$(".pop-up").removeClass("visible")})})})):($(".lds-ring").css("display","none"),$(".pop-up#detectIconError").addClass("visible"))})):$(".pop-up#urlEmpty").addClass("visible")}),$("#install").click(function(e){if(e.preventDefault(),invalidUrl||invalidName||!checkUrl||!checkName)return void $(".pop-up#urlNameError").addClass("visible");let t=$("#formAdd").attr("action"),i=$("#formAdd").serialize();fetch(`/execute$./${t}?${i}`).then(e=>e.text()).then(e=>{0==e&&($(".lds-ring").css("display","inline-flex"),setTimeout(function(){$(".lds-ring").css("display","none"),$(".pop-up#installSuccess").addClass("visible")},2e3),$("#installClose").click(function(e){document.location.reload(!0)}))})}),$(".urlNative").mouseover(function(){let e=$(this).children()[0];$(e).css("display","inline-flex")}).mouseleave(function(){let e=$(this).children()[0];$(e).css("display","none")}),$(".btnRemove").each(function(e,t){$(this).click(function(i){i.preventDefault(),$(".pop-up#remove"+e).addClass("visible"),$("#removeYes"+e).click(function(i){i.preventDefault();let s=$(t).children()[0],c=$(s).val();fetch(`/execute$./webapp-remove.sh?filedesk=${c}`).then(e=>e.text()).then(e=>{document.location.reload(!0)}),$(".pop-up#remove"+e).removeClass("visible")})})});